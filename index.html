<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Сапфир — салон красоты в Тольятти</title>
  <meta name="description" content="Салон красоты Сапфир в Тольятти — парикмахерские услуги, ногтевой сервис, косметология." />
  
  <script src="https://api-maps.yandex.ru/2.1/?apikey=ВАШ_API_КЛЮЧ&lang=ru_RU" type="text/javascript"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-deep: #0B1533;
      --bg-deeper: #070e24;
      --sapphire-700:#103d8d;
      --sapphire-500:#185adb;
      --sapphire-300:#5fa4ff;
      --silver-100:#F1F3F6;
      --silver-200:#E3E6EC;
      --silver-300:#D0D6DF;
      --silver-500:#AAB4C3;
      --ink:#dfe7ff;
      --muted:#9aa3b2;
      --accent-6: var(--sapphire-300);
      --radius-xl: 18px;
      --shadow-soft: 0 10px 30px rgba(16,61,141,.25);
      --shadow-glow: 0 0 30px rgba(24,90,219,.35), inset 0 0 20px rgba(255,255,255,.04);
      --glass-bg: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      --glass-border: 1px solid rgba(255,255,255,.14);
      --line: rgba(255,255,255,.08);
    }
    html,body{
      height:100%;
      background:
        radial-gradient(1200px 800px at 70% -10%, rgba(16,61,141,.25), transparent 55%),
        radial-gradient(900px 600px at -10% 30%, rgba(24,90,219,.20), transparent 60%),
        linear-gradient(180deg, var(--bg-deep), var(--bg-deeper));
      color: var(--ink);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    body{
      margin:0;
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, system-ui, -apple-system, "Noto Sans", "Liberation Sans", sans-serif;
      line-height:1.6;
      scrollbar-gutter: stable;
    }
    body.no-scroll {
      overflow: hidden;
    }
    /* Стили скроллбара */
    html{ scrollbar-width: thin; scrollbar-color: var(--sapphire-500) rgba(255,255,255,.05); }
    ::-webkit-scrollbar{ width: 12px; }
    ::-webkit-scrollbar-track{ background: rgba(0,0,0,.1); }
    ::-webkit-scrollbar-thumb{ border-radius: 10px; background: linear-gradient(135deg, var(--sapphire-700), var(--sapphire-500)); box-shadow: inset 0 0 0 1px rgba(255,255,255,.25), 0 0 14px rgba(24,90,219,.45); }
    ::-webkit-scrollbar-thumb:hover{ background: linear-gradient(135deg, var(--sapphire-300), var(--sapphire-500)); box-shadow: inset 0 0 0 1px rgba(255,255,255,.35), 0 0 18px rgba(95,164,255,.55); }

    /* Верхняя плашка */
    .topbar{ position: relative; z-index: 5; display:flex; align-items:center; justify-content: flex-end; gap:22px; padding:10px 22px; border-bottom: 1px solid var(--line); backdrop-filter: blur(6px); background: linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,0)); font-size: 13px; color: var(--muted); }
    .topbar a{ color: var(--ink); text-decoration: none; opacity:.9; transition: opacity .25s ease, text-shadow .25s ease; }
    .topbar a:hover{ opacity:1; text-shadow: 0 0 14px rgba(95,164,255,.45); }
    .diamond-dot{ display:inline-block; width:7px; height:7px; background: linear-gradient(135deg, var(--silver-500), var(--silver-100)); transform: rotate(45deg); margin: 0 10px; box-shadow: 0 0 8px rgba(255,255,255,.35); }
    
    /* Хедер */
    header.site-header{ position: sticky; top:0; z-index:100; background: rgba(7,14,36,.8); backdrop-filter: blur(10px); border-bottom: 1px solid var(--line); }
    .nav-wrap{ max-width: 1200px; margin: 0 auto; padding: 16px 22px; display:flex; align-items:center; justify-content: space-between; }
    .brand-link { text-decoration: none; }
    .brand{ display:flex; align-items:center; gap:12px; letter-spacing: .16em; text-transform: uppercase; font-weight: 300; font-size: 15px; color: var(--silver-300); }
    .brand-mark{ width:28px; height:28px; background: conic-gradient(from 0deg, #7da8ff, #cbd5e1, #185adb, #7da8ff); border-radius: 6px; transform: rotate(45deg); box-shadow: 0 0 20px rgba(24,90,219,.45), inset 0 0 12px rgba(255,255,255,.35); }
    
    /* Навигация (Десктоп) */
    nav.primary{ position: relative; display:flex; gap: 24px; }
    nav.primary a{ position: relative; display:inline-block; padding: 10px 6px; color: var(--silver-200); text-decoration: none; font-weight: 300; letter-spacing: .04em; transition: color .3s ease, text-shadow .3s ease, transform .2s ease; }
    nav.primary a:hover{ color: #ffffff; text-shadow: 0 0 14px rgba(95,164,255,.5); transform: translateY(-1px); }
    /* Алмазный маркер */
    nav.primary a::before{ content:""; position:absolute; left:-12px; top:50%; width:6px; height:6px; transform: translateY(-50%) rotate(45deg) scale(.5); background: linear-gradient(135deg, var(--silver-500), var(--silver-100)); opacity:.0; transition: .3s ease; box-shadow: 0 0 10px rgba(255,255,255,.35); border: 1px solid rgba(255,255,255,.25); }
    nav.primary a:hover::before{ opacity: .9; transform: translateY(-50%) rotate(45deg) scale(1); }
    /* Волшебная линия */
    .nav-underline{ position:absolute; left:0; bottom: -18px; height:2px; width: 0; background: linear-gradient(90deg, #a7b7cc, #5fa4ff, #a7b7cc); border-radius: 2px; box-shadow: 0 0 12px rgba(95,164,255,.55); transition: left .35s ease, width .35s ease, opacity .3s ease; pointer-events: none; opacity: 0; }
    nav.primary:hover .nav-underline { opacity: 1; }
    
    /* Кнопка-гамбургер (скрыта на десктопе) */
    .nav-toggle { display: none; }

    /* Основной контент */
    .hero{ position: relative; overflow: hidden; padding: clamp(40px, 10vw, 96px) 22px 56px; }
    .hero-inner{ max-width: 1200px; margin: 0 auto; display:grid; grid-template-columns: 1.1fr 1fr; gap:40px; align-items: center; }
    .headline{ font-family: Georgia, "Times New Roman", serif; font-weight: 300; line-height: 1.05; letter-spacing: .18em; text-transform: uppercase; font-size: clamp(38px, 7vw, 88px); margin: 0 0 18px; background: linear-gradient(90deg, #cbd5e1 0%, #7da8ff 35%, #dfe7ff 65%, #9fb9ff 100%); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 0 0 22px rgba(125,168,255,.25); }
    .sub{ color: var(--silver-300); font-size: clamp(16px, 2.4vw, 18px); max-width: 58ch; margin-bottom: 28px; }
    .cta-row{ display:flex; gap:14px; flex-wrap: wrap; }
    .btn{ position: relative; display:inline-flex; align-items:center; justify-content:center; gap:10px; padding: 14px 22px; border-radius: 999px; border: 1px solid rgba(255,255,255,.18); background: linear-gradient(180deg, rgba(95,164,255,.22), rgba(95,164,255,.12)); color: #fff; text-decoration: none; letter-spacing: .06em; font-weight: 500; box-shadow: var(--shadow-soft); overflow: hidden; transition: transform .2s ease, box-shadow .3s ease, background .3s ease, border-color .3s ease; cursor: pointer; -webkit-tap-highlight-color: transparent; }
    .btn::after{ content:""; position:absolute; inset:-1px; background: linear-gradient(120deg, rgba(255,255,255,.65), rgba(255,255,255,0) 35%); transform: translateX(-120%); transition: transform .6s ease; mix-blend-mode: soft-light; }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 12px 36px rgba(95,164,255,.35); border-color: rgba(255,255,255,.35); background: linear-gradient(180deg, rgba(95,164,255,.3), rgba(95,164,255,.14)); }
    .btn:hover::after{ transform: translateX(0%); }
    .btn:active { transform: translateY(0) scale(0.98); }
    .btn.secondary{ background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); color: var(--silver-200); }
    .btn.secondary:hover{ color:#fff; box-shadow: 0 12px 36px rgba(170,180,195,.25); }
    .gem{ position: relative; aspect-ratio: 1.1/1; border-radius: var(--radius-xl); background: conic-gradient(from 180deg, rgba(203,213,225,.2), rgba(125,168,255,.2), rgba(24,90,219,.3), rgba(11,21,51,.4), rgba(203,213,255,.2)); box-shadow: inset 0 0 40px rgba(255,255,255,.08), 0 20px 60px rgba(11,21,51,.6), 0 0 80px rgba(24,90,219,.35); overflow: hidden; border: 1px solid rgba(255,255,255,.12); }
    .gem::before{ content:""; position:absolute; inset:-30%; background: radial-gradient(300px 180px at 25% 20%, rgba(255,255,255,.18), transparent 60%), radial-gradient(260px 160px at 80% 60%, rgba(95,164,255,.25), transparent 70%), radial-gradient(200px 120px at 40% 90%, rgba(255,255,255,.15), transparent 75%); filter: blur(10px); animation: gemDrift 12s ease-in-out infinite alternate; }
    @keyframes gemDrift{ 0%{ transform: rotate(0deg) translate(0,0) scale(1); opacity: .85;} 100%{ transform: rotate(10deg) translate(-10px, -6px) scale(1.02); opacity: 1;} }
    .gem-grid{ position:absolute; inset:0; background: linear-gradient(60deg, rgba(255,255,255,.08) 1px, transparent 1px) 0 0/ 32px 32px, linear-gradient(-60deg, rgba(255,255,255,.06) 1px, transparent 1px) 0 0/ 32px 32px; mix-blend-mode: overlay; opacity:.5; animation: gridSparkle 8s linear infinite; }
    @keyframes gridSparkle{ 0%{ background-position: 0 0, 0 0; } 100%{ background-position: 64px 0, -64px 0; } }
    .section{ max-width: 1200px; margin: 30px auto; padding: 0 22px; }
    .section h2{ font-family: Georgia, "Times New Roman", serif; font-weight: 300; letter-spacing: .14em; text-transform: uppercase; font-size: 24px; color: var(--silver-200); margin: 34px 0 18px; }
    .services{ display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 18px; }
    .card{ position:relative; border-radius: var(--radius-xl); background: var(--glass-bg); border: var(--glass-border); padding: 22px; overflow:hidden; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06); transition: transform .4s ease-out, box-shadow .4s ease, border-color .4s ease; }
    .card:hover{ transform: translateY(-4px); box-shadow: var(--shadow-glow); border-color: rgba(255,255,255,.28); }
    .card h3{ margin: 14px 0 8px; font-weight: 400; letter-spacing: .04em; color: #fff; }
    .card p{ margin: 0; color: var(--silver-300); }
    .icon{ width:48px; height:48px; border-radius: 14px; display:grid; place-items:center; background: linear-gradient(135deg, rgba(95,164,255,.22), rgba(95,164,255,.06)); border: 1px solid rgba(255,255,255,.16); box-shadow: inset 0 0 12px rgba(255,255,255,.05), 0 6px 16px rgba(24,90,219,.18); }
    .icon svg{ width:26px; height:26px; stroke:#cfe0ff; stroke-width:1.5; fill:none; stroke-linecap:round; stroke-linejoin:round;}
    .map-section{ margin-top: 50px; }
    #map-container{ border-radius: var(--radius-xl); overflow: hidden; border: 1px solid var(--line); box-shadow: var(--shadow-soft); height: 400px; }
    #map{ width: 100%; height: 100%; filter: invert(95%) hue-rotate(180deg) brightness(1.1) contrast(.9); }
    .contact{ margin: 46px auto 20px; padding: 22px; border-radius: var(--radius-xl); background: var(--glass-bg); border: var(--glass-border); display:flex; align-items:center; justify-content: space-between; gap:20px; flex-wrap: wrap; }
    .contact .info{ display:flex; align-items:center; gap:18px; flex-wrap:wrap; color: var(--silver-300); }
    
    /* Подвал и подпись */
    footer{ border-top: 1px solid var(--line); color: var(--silver-300); font-size: 13px; padding: 22px; text-align: center; background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)); }
    .dev-signature { margin-top: 12px; font-size: 14px; color: var(--silver-500); }
    .brand-logo-char { font-family: "JetBrains Mono", monospace; font-weight: 700; color: var(--accent-6); font-size: 22px; line-height: 1; display: inline-block; vertical-align: middle; }

    /* "Живые" анимации появления */
    [data-anim]{ opacity: 0; transform: translateY(20px); transition: opacity .6s cubic-bezier(.2,.7,.2,1), transform .6s cubic-bezier(.2,.7,.2,1); }
    [data-anim].is-visible{ opacity: 1; transform: translateY(0); }
    /* Добавляем задержки для каскадного эффекта */
    .hero [data-anim]:nth-child(2) { transition-delay: .1s; }
    .hero [data-anim]:nth-child(3) { transition-delay: .2s; }
    .services .card:nth-child(2) { transition-delay: .1s; }
    .services .card:nth-child(3) { transition-delay: .2s; }

    /* ---- Стили модального окна ---- */
    .modal-overlay { position: fixed; inset: 0; background: rgba(7, 14, 36, 0.7); backdrop-filter: blur(8px); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 15px; opacity: 0; visibility: hidden; transition: opacity .3s ease, visibility .3s ease; }
    .modal-overlay.is-visible { opacity: 1; visibility: visible; }
    .modal { position: relative; background: var(--glass-bg); border: var(--glass-border); border-radius: var(--radius-xl); padding: 28px 32px; width: 100%; max-width: 400px; text-align: center; box-shadow: var(--shadow-glow); transform: scale(0.95) translateY(10px); transition: transform .3s cubic-bezier(.2,.7,.2,1); }
    .modal-overlay.is-visible .modal { transform: scale(1) translateY(0); }
    .modal h3 { margin: 0 0 12px; font-weight: 400; font-size: 20px; color: #fff; }
    .modal-phone { font-size: clamp(20px, 6vw, 24px); font-weight: 500; color: var(--silver-100); letter-spacing: .05em; margin-bottom: 24px; }
    .modal-actions { display: flex; flex-direction: column; gap: 12px; }
    .modal-close { position: absolute; top: 12px; right: 12px; background: none; border: none; color: var(--silver-300); font-size: 24px; line-height: 1; cursor: pointer; padding: 4px; opacity: .7; transition: opacity .2s ease, transform .2s ease; }
    .modal-close:hover { opacity: 1; transform: scale(1.1); }

    /* --- МОБИЛЬНАЯ ВЕРСИЯ (ОСНОВНОЙ АКЦЕНТ) --- */
    @media (max-width: 960px){
      .hero-inner{ grid-template-columns: 1fr; text-align: center; }
      .cta-row { justify-content: center; }
      .gem{ max-width: 400px; margin: 20px auto 0; }
    }

    @media (max-width: 768px){
      .topbar { justify-content: center; flex-wrap:wrap; text-align: center; gap: 8px 16px; }
      .diamond-dot { display: none; } /* Скрываем разделитель на мобильных */

      /* Скрываем десктопную навигацию */
      nav.primary { display: none; }

      /* Гамбургер */
      .nav-toggle { display: block; z-index: 1002; position: relative; width: 30px; height: 30px; background: transparent; border: none; cursor: pointer; padding: 0; }
      .nav-toggle span { display: block; width: 24px; height: 2px; background: var(--silver-200); border-radius: 2px; margin: 5px auto; transition: transform 0.3s ease, opacity 0.3s ease; }
      .nav-toggle.is-active span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
      .nav-toggle.is-active span:nth-child(2) { opacity: 0; }
      .nav-toggle.is-active span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }
      
      /* Полноэкранное меню (новая реализация) */
      .mobile-nav {
        position: fixed;
        inset: 0;
        z-index: 1001;
        background: rgba(7, 14, 36, 0.9);
        backdrop-filter: blur(12px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: opacity .3s ease, visibility .3s ease, transform .3s ease;
      }
      .mobile-nav.is-open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }
      .mobile-nav a {
        color: var(--silver-100);
        text-decoration: none;
        font-size: 24px;
        padding: 10px 20px;
        opacity: 0;
        transform: translateY(10px);
        transition: opacity .3s ease, transform .3s ease;
      }
      .mobile-nav.is-open a {
        opacity: 1;
        transform: translateY(0);
      }
      /* Анимация появления ссылок каскадом */
      .mobile-nav.is-open a:nth-child(1) { transition-delay: .2s; }
      .mobile-nav.is-open a:nth-child(2) { transition-delay: .3s; }
      .mobile-nav.is-open a:nth-child(3) { transition-delay: .4s; }

      .services{ grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <div class="topbar">
    <span>г. Тольятти, ул. 70 лет Октября, 35</span>
    <span class="diamond-dot" aria-hidden="true"></span>
    <a href="tel:+79050190702">+7 905 019 07-02</a>
  </div>

  <header class="site-header">
    <div class="nav-wrap">
      <a href="#" class="brand-link" aria-label="На главную">
        <div class="brand">
          <span class="brand-mark" aria-hidden="true"></span>
          Сапфир
        </div>
      </a>
      <nav class="primary" id="primaryNav">
        <a href="#services">Услуги</a>
        <a href="#map-section">Карта</a>
        <a href="#" class="nav-contact-trigger">Контакты</a>
        <span class="nav-underline" id="navUnderline" aria-hidden="true"></span>
      </nav>
      <button class="nav-toggle" id="navToggle" aria-label="Открыть меню">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </button>
    </div>
  </header>

  
  <div class="mobile-nav" id="mobileNav">
      <a href="#services">Услуги</a>
      <a href="#map-section">Карта</a>
      <a href="#" class="nav-contact-trigger">Контакты</a>
  </div>

  <main>
    <section class="hero">
      <div class="hero-inner">
        <div>
          <h1 class="headline" data-anim>Сапфир</h1>
          <p class="sub" data-anim>Здесь будет текст.</p>
          <div class="cta-row" data-anim>
            <button class="btn modal-trigger">Записаться</button>
            <a href="#services" class="btn secondary">Смотреть услуги</a>
          </div>
        </div>
        <div class="gem" aria-hidden="true" data-anim>
          <div class="gem-grid"></div>
        </div>
      </div>
    </section>

    <section class="section" id="services">
      <h2 data-anim>Наши услуги</h2>
      <div class="services">
        <article class="card" data-anim>
          <div class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M6.13 21.63l-4.2-4.2c-1-1-1.6-2.4-1.6-3.8 0-1.4.6-2.8 1.6-3.8l4.2-4.2c2.1-2.1 5.5-2.1 7.6 0l1.1 1.1M13 18H8.5c-1.4 0-2.5-1.1-2.5-2.5S7.1 13 8.5 13H13c.8 0 1.5-.7 1.5-1.5S13.8 10 13 10h-1M5 3l14 14"></path></svg></div>
          <h3>Парикмахерские</h3>
          <p>Здесь будет текст.</p>
        </article>
        <article class="card" data-anim>
          <div class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M13.3 3.4c.5-.9 1.8-1 2.7-.4l.9.5c.9.5 1 1.8.4 2.7l-3.3 5.4"></path><path d="M12.5 6.2L4 14.8c-.8.8-.8 2 0 2.8l2.7 2.7c.8.8 2 .8 2.8 0L18 11.5"></path><path d="M18 13l-8-8"></path><path d="M21.5 13.4a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div>
          <h3>Ногтевой сервис</h3>
          <p>Здесь будет текст.</p>
        </article>
        <article class="card" data-anim>
          <div class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 22a7 7 0 007-7h-4a3 3 0 00-3 3v4z"></path><path d="M12 2a7 7 0 017 7h-4a3 3 0 01-3-3V2z"></path><path d="M2 12a7 7 0 007 7v-4a3 3 0 00-3-3H2z"></path><path d="M22 12a7 7 0 01-7 7v-4a3 3 0 013-3h4z"></path></svg></div>
          <h3>Косметология</h3>
          <p>Здесь будет текст.</p>
        </article>
      </div>
    </section>

    <section class="section map-section" id="map-section">
        <h2 data-anim>Как нас найти</h2>
        <div id="map-container" data-anim><div id="map"></div></div>
    </section>

    <section class="section">
        <div class="contact" id="contact" data-anim>
            <div class="info">
                <strong style="letter-spacing:.08em; text-transform:uppercase; font-weight:400; color:#fff;">Свяжитесь с нами</strong>
                 <a href="tel:+79050190702" style="margin-left:auto;">+7 905 019 07-02</a>
            </div>
        </div>
    </section>
  </main>

  <footer>
    © Сапфир, 2025.
    <div class="dev-signature">
      Сайт разработал Алексей <span class="brand-logo-char">Э.</span> Бронников
    </div>
  </footer>

  <div class="modal-overlay" id="contactModal">
    <div class="modal">
      <button class="modal-close" aria-label="Закрыть окно">&times;</button>
      <h3>Запись по телефону</h3>
      <div class="modal-phone">+7 905 019 07-02</div>
      <div class="modal-actions">
        <a href="tel:+79050190702" class="btn">Позвонить</a>
        <button class="btn secondary" id="copyPhoneBtn">Скопировать номер</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {

      // --- 1. "Magic line" (десктоп) ---
      (function(){
        const nav = document.getElementById('primaryNav');
        const underline = document.getElementById('navUnderline');
        if (!nav || !underline) return;
        const links = Array.from(nav.querySelectorAll('a'));
        
        function moveUnderline(element) {
          if (window.innerWidth < 769) return;
          const elRect = element.getBoundingClientRect();
          const navRect = nav.getBoundingClientRect();
          underline.style.width = `${elRect.width}px`;
          underline.style.left = `${elRect.left - navRect.left}px`;
        }
        
        links.forEach(link => {
          link.addEventListener('mouseenter', () => moveUnderline(link));
        });
      })();

      // --- 2. Анимация появления элементов при скролле ---
      (function(){
        const animatedElements = document.querySelectorAll('[data-anim]');
        if (animatedElements.length === 0) return;
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        animatedElements.forEach(el => observer.observe(el));
      })();

      // --- 3. НОВАЯ РЕАЛИЗАЦИЯ: Мобильное меню (гамбургер) ---
      (function(){
        const navToggle = document.getElementById('navToggle');
        const mobileNav = document.getElementById('mobileNav');
        if (!navToggle || !mobileNav) return;

        function toggleMenu() {
            const isOpen = mobileNav.classList.toggle('is-open');
            navToggle.classList.toggle('is-active');
            navToggle.setAttribute('aria-expanded', isOpen);
            document.body.classList.toggle('no-scroll', isOpen);
        }

        navToggle.addEventListener('click', toggleMenu);
        
        // Закрываем меню при клике на любую ссылку в нем
        mobileNav.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', () => {
            if (mobileNav.classList.contains('is-open')) {
                toggleMenu();
            }
          });
        });
      })();

      // --- 4. Модальное окно ---
      (function(){
          const modal = document.getElementById('contactModal');
          if (!modal) return;
          const openTriggers = document.querySelectorAll('.modal-trigger, .nav-contact-trigger');
          const closeBtn = modal.querySelector('.modal-close');
          const copyBtn = document.getElementById('copyPhoneBtn');
          const phoneToCopy = '+79050190702';
          
          function openModal(e) { e.preventDefault(); modal.classList.add('is-visible'); document.body.classList.add('no-scroll'); }
          function closeModal() { modal.classList.remove('is-visible'); if(!document.getElementById('mobileNav').classList.contains('is-open')) { document.body.classList.remove('no-scroll'); } }

          openTriggers.forEach(trigger => trigger.addEventListener('click', openModal));
          closeBtn.addEventListener('click', closeModal);
          modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
          
          copyBtn.addEventListener('click', () => {
              navigator.clipboard.writeText(phoneToCopy.replace(/\s|-/g, '')).then(() => {
                  const originalText = copyBtn.textContent;
                  copyBtn.textContent = 'Скопировано!';
                  setTimeout(() => { copyBtn.textContent = originalText; }, 2000);
              });
          });
      })();
      
      // --- 5. Инициализация Яндекс.Карты ---
      function initMap() {
        const mapContainer = document.getElementById('map');
        if(!mapContainer) return;
        
        // Скорректированные, более точные координаты
        const mapCenter = [53.54075, 49.3377];
        const myMap = new ymaps.Map(mapContainer, { center: mapCenter, zoom: 17, controls: ['zoomControl'] });
        const placemark = new ymaps.Placemark(mapCenter, {
          balloonContentHeader: 'Салон красоты "Сапфир"',
          balloonContentBody: 'ул. 70 лет Октября, 35<br>Ждём вас!',
          hintContent: 'Салон "Сапфир"'
        }, { preset: 'islands#dotIcon', iconColor: '#185adb' });
        myMap.geoObjects.add(placemark);
        myMap.behaviors.disable('scrollZoom');
      }
      ymaps.ready(initMap);
    });
  </script>
</body>
</html>
